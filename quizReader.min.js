function checkAudio(){return!!document.createElement("audio").canPlayType}var judgmentImg="",totalQues=0,quesNum=0,score=0,basePath="",scoringRangeSize=scoringRange.length,quizUrl=document.URL,quizTitle=document.title.split(" : ")[0];document.title=quizTitle;var hasAudio=checkAudio();"ontouchstart"in document.documentElement||(document.documentElement.className+=" no-touch");var dissolve=function(){1!==jQuery(this).index()&&jQuery(this).prev().fadeOut(2e3,dissolve)};jQuery(document).ready(function(e){function s(){var s="content";for(i=0;i<totalQues;i++){var n=e("#question"+i);if(imageNum=i,i<10&&(imageNum="0"+imageNum),u(n)&&n.hasClass("multiphoto")&&n.find(".multiphoto .photos img").css({opacity:1}),o(n)&&(n.children(".sounds").hide(),hasAudio||e(".cover p").html('It looks like your browser doesn\'t support the sound effects used in this quiz. Please consider <a target="_blank" href="http://browsehappy.com/">upgrading your browser</a>.')),r(n)){$thePhoto=n.find(".photos img");var t=n.attr("xScrollFrom"),h=n.attr("yScrollFrom");if("undefined"!=typeof t){var d=parseInt(t);$thePhoto.css({left:d})}if("undefined"!=typeof h){var c=parseInt(h);$thePhoto.css({top:c})}}if(a(n)){n.show();var l=n.find(".photos img:first-child")[0].src.split(s).shift(),m=l+s+"/"+imageNum+"b-fade.jpg";n.children(".photos").css("background-image","url("+m+")"),n.children(".photos").css("background-position","0px 4px"),n.children(".photos").css("background-repeat","no-repeat"),n.hide()}}}function o(e){return e.hasClass("effect-sound")}function n(e){return e.hasClass("effect-zoom-in")}function t(e){return e.hasClass("effect-zoom-out")}function u(e){return e.hasClass("effect-dissolve")}function r(e){return e.hasClass("transition-scroll")}function a(e){return e.hasClass("transition-bg")}function h(){var s=e("#question"+quesNum);s.show();var n=s.hasClass("multiphoto"),t=s.hasClass("multichoice");if(n?(C(),d(),l()):t?(w(),c(),m()):("undefined"!=typeof randomTrueFalse&&w(),c(),m()),o(s)&&hasAudio){var i=s.find(".sounds .before");i.length&&i.get(0).play()}}function d(){e("#ques"+quesNum+"pho0").hover(function(){e("#ques"+quesNum+"ans0").parent().addClass("hover"),e(this).addClass("hover")},function(){e("#ques"+quesNum+"ans0").parent().removeClass("hover"),e(this).removeClass("hover")}),e("#ques"+quesNum+"pho1").hover(function(){e("#ques"+quesNum+"ans1").parent().addClass("hover"),e(this).addClass("hover")},function(){e("#ques"+quesNum+"ans1").parent().removeClass("hover"),e(this).removeClass("hover")}),e("#ques"+quesNum+"pho2").hover(function(){e("#ques"+quesNum+"ans2").parent().addClass("hover"),e(this).addClass("hover")},function(){e("#ques"+quesNum+"ans2").parent().removeClass("hover"),e(this).removeClass("hover")}),e("#ques"+quesNum+"pho3").hover(function(){e("#ques"+quesNum+"ans3").parent().addClass("hover"),e(this).addClass("hover")},function(){e("#ques"+quesNum+"ans3").parent().removeClass("hover"),e(this).removeClass("hover")}),e("#ques"+quesNum+"ans0").parent().hover(function(){e("#ques"+quesNum+"pho0").addClass("hover"),e(this).addClass("hover")},function(){e("#ques"+quesNum+"pho0").removeClass("hover"),e(this).removeClass("hover")}),e("#ques"+quesNum+"ans1").parent().hover(function(){e("#ques"+quesNum+"pho1").addClass("hover"),e(this).addClass("hover")},function(){e("#ques"+quesNum+"pho1").removeClass("hover"),e(this).removeClass("hover")}),e("#ques"+quesNum+"ans2").parent().hover(function(){e("#ques"+quesNum+"pho2").addClass("hover"),e(this).addClass("hover")},function(){e("#ques"+quesNum+"pho2").removeClass("hover"),e(this).removeClass("hover")}),e("#ques"+quesNum+"ans3").parent().hover(function(){e("#ques"+quesNum+"pho3").addClass("hover"),e(this).addClass("hover")},function(){e("#ques"+quesNum+"pho3").removeClass("hover"),e(this).removeClass("hover")})}function c(){e("#ques"+quesNum+"ans0").parent().hover(function(){e(this).addClass("hover")},function(){e(this).removeClass("hover")}),e("#ques"+quesNum+"ans1").parent().hover(function(){e(this).addClass("hover")},function(){e(this).removeClass("hover")}),e("#ques"+quesNum+"ans2").parent().hover(function(){e(this).addClass("hover")},function(){e(this).removeClass("hover")}),e("#ques"+quesNum+"ans3").parent().hover(function(){e(this).addClass("hover")},function(){e(this).removeClass("hover")})}function l(){e(".answerLine").click(function(){e("img").unbind(),e(".answerLine").unbind(),u(e("#question"+quesNum))||(e("#question"+quesNum+" .photos img.wrong").css("opacity","0.3").removeClass("hover"),e("#question"+quesNum+" .photos img.correct").addClass("highlight"));var s=e(this).children("input").attr("id").slice(-1);v(s)}),e(".photos img").click(function(){e("img").unbind(),e(".answerLine").unbind(),u(e("#question"+quesNum))||(e("#question"+quesNum+" .photos img.wrong").css("opacity","0.3").removeClass("hover"),e("#question"+quesNum+" .photos img.correct").addClass("highlight"));var s=e(this).attr("id").slice(-1);v(s)})}function m(){e(".answerLine").click(function(){e(".answerLine").unbind();var s=e(this).children("input").attr("id").slice(-1);v(s)})}function v(s){var i=e("#question"+quesNum);if(i.addClass("answered"),$thePhoto=i.find(".photos img"),e("input#ques"+quesNum+"ans"+s).parent().removeClass("hover"),e("input#ques"+quesNum+"ans"+s).parent().addClass("userAnswer"),i.find("input").attr("disabled","disabled"),i.find("input.correct").parent().addClass("correct"),i.find("input.wrong").parent().css("opacity","0.3"),i.children(".response").show(),u(i)&&i.find(".photos .layer:last-child").fadeOut(2e3,dissolve),n(i)&&i.find(".photos .layer:first-child").addClass("zoomIn"),t(i)&&i.find(".photos .layer:first-child").addClass("zoomOut"),r(i)){var a=$thePhoto.width(),h=$thePhoto.height(),d=i.attr("xScrollTo"),c=i.attr("yScrollTo");if("undefined"==typeof d)var l=-1*(a-600);else var l=parseInt(d);if("undefined"==typeof c)var m=-1*(h-358);else var m=parseInt(c);$thePhoto.animate({left:l,top:m},1500)}o(i)&&hasAudio&&i.find(".sounds audio.after").length&&i.find(".sounds audio.after").get(0).play(),e("input#ques"+quesNum+"ans"+s).hasClass("correct")?(i.find(".response .answeredCorrect").show(),score++):i.find(".response .answeredWrong").show(),quesNum===totalQues-1?q(s):p(s)}function p(s){var n=e("#question"+quesNum);e('<div id="continueButton">NEXT QUESTION <span class="arrow">&rarr;</span></div>').appendTo("#quiz"),e("#continueButton").click(function(){if(e("#continueButton").unbind().remove(),o(n)&&hasAudio){var t=n.find(".sounds audio.after");t.length&&t.get(0).pause()}f(s),n.hide(),quesNum++,h()})}function q(s){var n=e("#question"+quesNum);e('<div id="continueButton">SEE YOUR SCORE <span class="arrow">&rarr;</span></div>').appendTo("#quiz"),e("#continueButton").click(function(){if(e("#continueButton").unbind().remove(),o(n)&&hasAudio){var t=n.find(".sounds audio.after");t.length&&t.get(0).pause()}f(s),n.hide(),g()})}function f(s){e("#question"+quesNum).removeClass("answered"),e("input#ques"+quesNum+"ans"+s).parent().removeClass("userAnswer"),e("#question"+quesNum+" input").removeAttr("disabled"),e("#question"+quesNum+" input").attr("checked",!1),e("#question"+quesNum+" input.correct").parent().removeClass("correct"),e("#question"+quesNum+" input.wrong").parent().css("opacity",""),e("#question"+quesNum+" .photos img.wrong").css("opacity",""),e("#question"+quesNum+" .photos img.correct").removeClass("hover"),e("#question"+quesNum+" .response span").hide(),e("#question"+quesNum+" .response").hide(),e("#question"+quesNum+" .highlight").removeClass("highlight")}function g(){$scoring=e("#scoring");var s=encodeURIComponent(quizUrl),i=encodeURIComponent(quizTitle),r='<div class="facebookShare"><a href="https://www.facebook.com/sharer.php?u='+s+'" target="_blank">Share on Facebook!</a></div>',a='<div class="twitterShare"><a href="https://twitter.com/intent/tweet?source=tweetbutton&amp;text=I%20scored%20'+score+"%20out%20of%20"+totalQues+"%20on%20"+i+"!&amp;url="+s+'&amp;via=stltoday" target="_blank">Tweet your score!</a></div>';for(e("#quiz #scoring").show(),e('<div id="score">'+score+" out of "+totalQues+"</div>").insertBefore("#response"),e('<div class="quizShare">'+r+a+"</div>").insertBefore("#response"),u($scoring)&&$scoring.find(".photos .layer:last-child").fadeOut(2e3,dissolve),o($scoring)&&hasAudio&&$scoring.find(".sounds .before").length&&$scoring.find(".sounds .before").get(0).play(),n($scoring)&&$thisQuestion.find(".photos .layer").addClass("zoomIn"),t($scoring)&&$thisQuestion.find(".photos .layer").addClass("zoomOut"),x=0;x<scoringRangeSize;x++){if(score>=scoringRange[x]){e('<div id="evaluation">'+scoringEvaluation[x]+"</div>").insertAfter("#score");break}if(x===scoringRangeSize-1&&score<scoringRange[x]){e('<div id="evaluation">'+scoringEvaluation[x]+"</div>").insertAfter("#score");break}}N()}function N(){e('<div id="continueButton" class="playAgainButton">PLAY AGAIN <span class="arrow">&rarr;</span></div>').appendTo("#scoring"),e("#continueButton").click(function(){e("#continueButton").unbind().remove(),e("#score").remove(),e("#evaluation").remove(),e("#scoring").hide(),e(".quizShare").remove(),e(".questions .photos img").show(),s(),quesNum=0,score=0,h()})}function C(){var s="";u(e("#question"+quesNum))&&(s=" div.layer ");var o=e("#question"+quesNum+" .photos"+s).children("img").get(),n=e("#question"+quesNum+" .answers").children(".answerLine").get(),t=n.length,r=[];for(i=0;i<t;i++)r[i]=i;for(r.sort(function(){return Math.round(Math.random())-.5}),e("#question"+quesNum+" .photos"+s).remove("img"),e("#question"+quesNum+" .answers").remove(".answerLine"),i=0;i<t;i++)e("#question"+quesNum+" .photos"+s).append(o[r[i]]),e("#question"+quesNum+" .answers").append(n[r[i]])}function w(){var s=e("#question"+quesNum+" .answers").children(".answerLine").get();for(s.sort(function(){return Math.round(Math.random())-.5}),e("#question"+quesNum+" .answers").remove(".answerLine"),i=0;i<s.length;i++)e("#question"+quesNum+" .answers").append(s[i])}totalQues=e("#quiz .questions").length,e("#quiz .spinningWheel").remove(),e("#quiz .questions").hide(),e("#quiz #scoring").hide(),s(),e(".cover").length?e("#playButton").click(function(){e("#playButton").unbind("click").hide(),e(".cover").hide(),h()}):h()});